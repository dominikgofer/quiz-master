{% extends 'base.html' %}
{% block title %}Leaderboard{% endblock %}
{% block content %}
<h1>{% if quiz %}Leaderboard: {{ quiz.title }}{% else %}Overall Leaderboard{% endif %}</h1>
<div class="card">
<div class="card-body">
<table class="table table-striped">
<thead><tr><th>Rank</th><th>User</th><th>Score</th></tr></thead>
<tbody>
{% if quiz %}
{% for attempt in attempts %}
<tr><td>{{ forloop.counter }}</td><td>{{ attempt.user.username }}</td><td>{{ attempt.score }}%</td></tr>
{% empty %}<tr><td colspan="3" class="text-center">No attempts yet.</td></tr>
{% endfor %}
{% else %}
{% for user_score in users_scores %}
<tr><td>{{ forloop.counter }}</td><td>{{ user_score.user__username }}</td><td>{{ user_score.avg_score|floatformat:1 }}%</td></tr>
{% empty %}<tr><td colspan="3" class="text-center">No data yet.</td></tr>
{% endfor %}
{% endif %}
</tbody></table>
</div></div>
{% endblock %}
